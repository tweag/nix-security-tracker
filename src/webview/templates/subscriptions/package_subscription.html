{% extends "base.html" %}
{% load viewutils %}

{% block content %}

<div class="package-subscription">

  <header class="column">
    <a href="{% url 'webview:subscriptions:center' %}">‚Üê Subscription Center</a>
    <h1 class="page-title">Package Subscription</h1>
  </header>

  {% if not package_exists %}

    <div class="error-block">
      Package "{{ package_name }}" could not be found.
    </div>

  {% else %}
    <div class="rounded-box column gap">
      <h2 class="heading">{{ package_name }}</h2>
      <p>Subscribe to receive notifications about security alerts suggestions that may affect this package.</p>
      <div class="toggler {% if is_subscribed %}toggler-on{% else %}toggler-off{% endif %}">
        <div class="grow">You are {% if not is_subscribed %}not{% endif %} subscribed to this package</div>
        <form method="post" class="subscription-form">
          {% csrf_token %}
          {% if is_subscribed %}
            <input type="hidden" name="action" value="unsubscribe">
            <button class="btn btn-gray" type="submit">Unsubscribe</button>
          {% else %}
            <input type="hidden" name="action" value="subscribe">
            <button class="btn btn-green" type="submit">Subscribe</button>
          {% endif %}
        </form>
      </div>
    </div>
  {% endif %}

</div>
{% endblock content %}
