{% load viewutils %}
<div class="column gap package-subscriptions-container">

  <!-- Error messages specific to package subscriptions -->
  {% if error_message %}
  <div class="error-block">{{ error_message }}</div>
  {% endif %}

  <!-- Add new subscription form -->
  <form method="post" action="{% url 'webview:subscriptions:add' %}" hx-post="{% url 'webview:subscriptions:add' %}" hx-target="closest .package-subscriptions-container" hx-swap="outerHTML" class="row gap-small centered" hx-indicator="find button">
    {% csrf_token %}
    <input type="text" name="package_name" placeholder="Package name" required class="package-input">
    <button type="submit" class="btn btn-green">Subscribe</button>
  </form>

  <!-- Subscriptions list -->
    {% if package_subscriptions %}
      <ul class="column gap-small">
      {% for package in package_subscriptions %}
        <li class="row gap-small centered">
          <form method="post" action="{% url 'webview:subscriptions:remove' %}" style="display: inline;" hx-post="{% url 'webview:subscriptions:remove' %}" hx-target="closest .package-subscriptions-container" hx-swap="innerHTML" hx-confirm="Are you sure you want to unsubscribe from {{ package }}?" hx-indicator="find button">
            {% csrf_token %}
            <input type="hidden" name="package_name" value="{{ package }}">
            <button type="submit" class="btn btn-gray">Unsubscribe</button>
          </form>
          <div>{{ package }}</div>
        </li>
      {% endfor %}
      </ul>
    {% else %}
      <div class="subscriptions-list-empty">
        You haven't subscribed to any packages yet.
      </div>
    {% endif %}
</div>
